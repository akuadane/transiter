name: New York City Subway

feeds:
  - id: gtfsstatic
    requiredForInstall: true
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 24h

    url: 'http://web.mta.info/developers/data/nyct/subway/google_transit.zip'

    parser: GTFS_STATIC

  - id: subwaycsv
    requiredForInstall: true
    url: 'https://atisdata.s3.amazonaws.com/Station/Stations.csv'
    parser: NYCT_SUBWAY_CSV

  - id: "alerts"
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/camsys%2Fsubway-alerts"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_ALERTS
      nyctAlertsOptions:
        elevatoralertsdeduplicationpolicy: 2 # DEDUPLICATE_IN_COMPLEX / TODO deserialize from string
        elevatoralertsinformusingstationids: true
        skiptimetablednoservicealerts: true
        addnyctmetadata: true

  - id: "1234567"
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

  - id: ACE
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-ace"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME

  - id: BDFM
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-bdfm"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS


  - id: G
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-g"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

  - id: JZ
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-jz"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

  - id: L
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-l"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

  - id: NQRW
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-nqrw"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

  - id: SIR
    periodicUpdateEnabled: true
    periodicUpdatePeriod: 5s

    url: "https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-si"
    httpHeaders:
      X-API-KEY: "{{ .Args.mta_api_key }}"

    parser: GTFS_REALTIME
    gtfsRealtimeOptions:
      extension: NYCT_TRIPS

serviceMaps:
  - id: alltimes
    source: STATIC
    threshold: 0.05
    defaultForStopsInRoute: true
    defaultForRoutesAtStop: true

  - id: realtime
    source: REALTIME
    defaultForStopsInRoute: true
    defaultForRoutesAtStop: true

  - id: weekend
    source: STATIC
    threshold: 0.1
    days: ["Saturday", "Sunday"]
    startsLaterThan: 7h
    endsEarlierThan: 19h
